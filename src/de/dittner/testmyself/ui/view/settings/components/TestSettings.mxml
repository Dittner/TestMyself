<?xml version="1.0"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009"
         xmlns:s="library://ns.adobe.com/flex/spark"
         xmlns:button="de.dittner.testmyself.ui.common.button.*"
         xmlns:list="de.dittner.testmyself.ui.common.list.*">

    <fx:Script><![CDATA[
        import de.dittner.testmyself.model.domain.test.Test;
        import de.dittner.testmyself.utils.Values;

        import mx.collections.ArrayCollection;

        //--------------------------------------
        //  tests
        //--------------------------------------
        private var _testColl:ArrayCollection;
        [Bindable("testCollChanged")]
        public function get testColl():ArrayCollection {return _testColl;}
        public function set testColl(value:ArrayCollection):void {
            if (_testColl != value) {
                _testColl = value;
                dispatchEvent(new Event("testCollChanged"));
            }
        }

        private function removeTestHistory():void {
            if (testList.selectedItem is Test) {
                var selectedTest:Test = testList.selectedItem as Test;
                selectedTest.clearHistory();
            }
        }
        ]]></fx:Script>

    <s:layout>
        <s:VerticalLayout gap="{Values.PT20}" horizontalAlign="right"/>
    </s:layout>

    <list:ListForm id="testList"
                   width="100%" height="100%"
                   dataProvider="{testColl}"
                   title="{resourceManager.getString('app', 'Tests')}"
                   itemRenderer="de.dittner.testmyself.ui.view.settings.components.SettingsTestRenderer">
        <list:layout>
            <s:VerticalLayout gap="0" useVirtualLayout="false"/>
        </list:layout>
    </list:ListForm>

    <button:BlackButton id="removeBtn"
                        width="50%"
                        enabled="{testList.selectedItem != null}"
                        title="{resourceManager.getString('app', 'DeleteTestData')}"
                        click="removeTestHistory()"/>

</s:Group>
