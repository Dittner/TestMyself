<?xml version="1.0"?>
<s:Button xmlns:fx="http://ns.adobe.com/mxml/2009"
          xmlns:s="library://ns.adobe.com/flex/spark"
          interactionMode="mouse">

    <fx:Metadata>
        [Style(name="image", type="Object")]
        [Style(name="disabledImage", type="Object")]
    </fx:Metadata>

    <fx:Script><![CDATA[
        //--------------------------------------
        //  menuID
        //--------------------------------------
        private var _menuID:String = "";
        [Bindable("menuIDChanged")]
        public function get menuID():String {return _menuID;}
        public function set menuID(value:String):void {
            if (_menuID != value) {
                _menuID = value;
                dispatchEvent(new Event("menuIDChanged"));
            }
        }
        ]]></fx:Script>

    <fx:Declarations>

        <fx:Component className="BitmapButtonSkin">

            <s:SparkSkin alpha="1" addedToStage="addedToStage(event)">

                <fx:Metadata>
                    [HostComponent("spark.components.Button")]
                </fx:Metadata>

                <fx:Script><![CDATA[
                    import de.dittner.testmyself.ui.common.utils.DisabledIconFade;

                    import mx.core.UIComponent;

                    private var fade:DisabledIconFade;

                    private function addedToStage(event:Event):void {
                        if (!fade) fade = new DisabledIconFade();
                        fade.activate(parent as UIComponent, disabledIcon);
                        removeEventListener(Event.ADDED_TO_STAGE, addedToStage);
                        addEventListener(Event.REMOVED_FROM_STAGE, removeFromStage);
                    }

                    private function removeFromStage(event:Event):void {
                        removeEventListener(Event.REMOVED_FROM_STAGE, removeFromStage);
                        addEventListener(Event.ADDED_TO_STAGE, addedToStage);
                        if (fade) fade.dispose();
                    }
                    ]]></fx:Script>

                <s:states>
                    <s:State name="disabled"/>
                    <s:State name="down"/>
                    <s:State name="over"/>
                    <s:State name="up"/>
                </s:states>

                <s:BitmapImage id="icon"
                               alpha.up=".5"
                               alpha.disabled=".5"
                               alpha.over="1"
                               alpha="1"
                               source="{getStyle('image')}"/>

                <s:BitmapImage id="disabledIcon"
                               alpha="0"
                               source="{getStyle('disabledImage')}"/>

            </s:SparkSkin>

        </fx:Component>

    </fx:Declarations>

    <s:skinClass>{BitmapButtonSkin}</s:skinClass>

</s:Button>
