<?xml version="1.0" encoding="utf-8"?>
<s:SparkSkin xmlns:fx="http://ns.adobe.com/mxml/2009"
             xmlns:s="library://ns.adobe.com/flex/spark"
             xmlns:fb="http://ns.adobe.com/flashbuilder/2009"
             xmlns:input="de.dittner.testmyself.ui.common.input.*"
             alpha.disabledStates="0.5" blendMode="normal">

    <fx:Metadata>
    <![CDATA[
        /**
         * @copy spark.skins.spark.ApplicationSkin#hostComponent
         */
        [HostComponent("de.dittner.testmyself.ui.common.input.TextInputForm")]
        ]]>
    </fx:Metadata>

    <fx:Script fb:purpose="styling">
        <![CDATA[
        import de.dittner.testmyself.ui.common.utils.AppColors;
        import de.dittner.testmyself.utils.Values;

        import mx.core.FlexVersion;

        private var paddingChanged:Boolean;

        /* Define the skin elements that should not be colorized. */
        static private const exclusions:Array = ["background", "textDisplay", "promptDisplay", "border"];

        /* exclusions before Flex 4.5 for backwards-compatibility purposes */
        static private const exclusions_4_0:Array = ["background", "textDisplay", "promptDisplay"];

        override public function get colorizeExclusions():Array {
            return FlexVersion.compatibilityVersion < FlexVersion.VERSION_4_5 ? exclusions_4_0 : exclusions;
        }

        override protected function measure():void {
            super.measure();
            measuredHeight = hostComponent.showTitle ? TITLE_HEIGHT + Values.PT30 : Values.PT30;
        }

        private static const TITLE_HEIGHT:uint = Values.PT20;

        override protected function updateDisplayList(w:Number, h:Number):void {
            super.updateDisplayList(w, h);

            var bgVerOffset:Number = hostComponent.showTitle ? TITLE_HEIGHT : 0;
            var g:Graphics = graphics;
            g.clear();
            g.lineStyle(1, hostComponent.isValidInput ? AppColors.INPUT_BORDER : AppColors.INVALID_INPUT_BORDER);
            g.beginFill(AppColors.INPUT_CONTENT);
            g.drawRect(0, bgVerOffset, w - 1, h - bgVerOffset - 1);
            g.endFill();

            titleLbl.visible = hostComponent.showTitle;
            textDisplay.y = bgVerOffset + 6;
        }
        ]]>
    </fx:Script>

    <fx:Script>
        <![CDATA[
        private static const focusExclusions:Array = ["textDisplay"];

        override public function get focusSkinExclusions():Array { return focusExclusions;}
        ]]>
    </fx:Script>

    <s:states>
        <s:State name="normal"/>
        <s:State name="disabled" stateGroups="disabledStates"/>
        <s:State name="normalWithPrompt"/>
        <s:State name="disabledWithPrompt" stateGroups="disabledStates"/>
    </s:states>

    <input:MXLabel id="titleLbl"
                   fontSize="{Values.PT15}"
                   mouseEnabled="false"
                   text="{hostComponent.title}"
                   color="{AppColors.TEXT_CONTROL_TITLE}"/>

    <s:RichEditableText id="textDisplay"
                        left="{Values.PT5}" right="{Values.PT5}"/>

</s:SparkSkin>
