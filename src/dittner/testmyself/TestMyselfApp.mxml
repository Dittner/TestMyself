<?xml version="1.0"?>
<s:Application
        xmlns:fx="http://ns.adobe.com/mxml/2009"
        xmlns:s="library://ns.adobe.com/flex/spark"
        frameRate="30"
        usePreloader="true"
        preloader="dittner.testmyself.view.common.preloader.ClockPreloader"
        backgroundColor="0x3d3f4b"
        initialize="initializeHandler(event)"
        creationComplete="creationCompleteHandler(event)"
        uncaughtError="uncaughtErrorHandler(event)"
        addedToStage="addedToStageHandler(event)">

    <fx:Script><![CDATA[
        import dittner.testmyself.model.language.Language;
        import dittner.testmyself.view.common.tooltip.CustomToolTip;
        import dittner.testmyself.view.common.tooltip.CustomToolTipManager;
        import dittner.testmyself.view.common.utils.TextFieldFactory;

        import mx.events.FlexEvent;
        import mx.logging.Log;

        public static var root:TestMyselfApp;
        private static var mainModule:MainModule;

        private function initializeHandler(event:FlexEvent):void {
            TestMyselfApp.root = this;
            TextFieldFactory.useEmbedFonts = true;
        }

        private function creationCompleteHandler(event:FlexEvent):void {
            mainModule = new MainModule(Language.DE);
            mainModule.start(this);
        }

        private function addedToStageHandler(event:Event):void {
            CustomToolTipManager.toolTip = new CustomToolTip();
        }

        private function uncaughtErrorHandler(event:UncaughtErrorEvent):void {
            var error:* = event.error;
            if (error is Error) {
                Log.getLogger("UnchaughtErrors").error((error as Error).getStackTrace().toString());
            }
            else {
                Log.getLogger("UnchaughtErrors").error(error ? error.toString() : "unknown error");
            }
        }
        ]]></fx:Script>

    <fx:Style source="/TestMyselfStyle.css"/>

</s:Application>
