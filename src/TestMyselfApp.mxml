<?xml version="1.0"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
               xmlns:s="library://ns.adobe.com/flex/spark"
               xmlns:main="de.dittner.testmyself.ui.view.main.*"
               frameRate="30"
               usePreloader="true"
               preloader="de.dittner.testmyself.ui.common.preloader.AppPreloader"
               backgroundColor="#3d3f4b"
               uncaughtError="uncaughtErrorHandler(event)"
               creationComplete="creationCompleteHandler(event)">

    <fx:Script><![CDATA[
        import de.dittner.testmyself.logging.CLog;
        import de.dittner.testmyself.logging.LogCategory;
        import de.dittner.testmyself.model.Bootstrap;
        import de.dittner.testmyself.ui.common.utils.TextFieldFactory;

        public static var root:TestMyselfApp;

        private function uncaughtErrorHandler(event:UncaughtErrorEvent):void {
            var error:* = event.error;
            if (error is Error) {
                CLog.err(LogCategory.UNCHAUGHT, (error as Error).getStackTrace().toString());
            }
            else {
                CLog.err(LogCategory.UNCHAUGHT, error ? error.toString() : "unknown error");
            }
        }

        private function creationCompleteHandler(event:Event):void {
            TestMyselfApp.root = this;
            TextFieldFactory.useEmbedFonts = true;
            var boot:Bootstrap = new Bootstrap(mainView);
            boot.start();
        }
        ]]></fx:Script>

    <!--<fx:Style source="/TestMyselfMobileStyle.css"/>-->
    <fx:Style source="/TestMyselfStyle.css"/>

    <main:MainView id="mainView"
                   width="100%" height="100%"/>

</s:Application>
